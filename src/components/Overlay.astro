---
interface Props {
    id: string;
}

const { id } = Astro.props;
---

<div
    id={id}
    class="overlay-panel fixed inset-0 z-50 overflow-hidden flex items-center justify-end pointer-events-none"
>
    <!-- Backdrop: fades in independently -->
    <div
        class="backdrop absolute inset-0 bg-stone-900/20 opacity-0 transition-opacity duration-700 ease-[cubic-bezier(0.16,1,0.3,1)]"
        data-close-overlay
    >
    </div>

    <!-- Right-anchored floating drawer: slides in from the right -->
    <div
        class="panel-content relative z-10 w-full md:w-[65vw] lg:w-[50vw] max-w-[800px] h-full overflow-y-auto bg-stone-50/98 p-10 md:p-16 lg:p-24 shadow-[-20px_0_60px_-15px_rgba(0,0,0,0.1)] translate-x-full transition-transform duration-700 ease-[cubic-bezier(0.16,1,0.3,1)]"
    >
        <button
            class="absolute top-8 right-8 text-secondary hover:text-[#8B0000] transition-colors"
            data-close-overlay
            aria-label="Close panel"
        >
            <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
        <slot />
    </div>
</div>

<style>
    :global(.overlay-panel.active) {
        pointer-events: auto;
    }

    :global(.overlay-panel.active) .backdrop {
        opacity: 1;
    }

    .overlay-panel.active .panel-content {
        transform: translateX(0);
    }
</style>
