---
interface Props {
    id: string;
}

const { id } = Astro.props;
---

<div
    id={id}
    class="overlay-panel fixed inset-0 z-50 flex items-stretch justify-end pointer-events-none"
>
    <!-- Backdrop: fades in, click to close -->
    <div
        class="overlay-backdrop absolute inset-0 bg-stone-900/20 opacity-0 transition-opacity duration-500 ease-out"
        data-close-overlay
    >
    </div>

    <!-- Clip container: clips the sliding panel to its own width -->
    <div
        class="overlay-clip relative z-10 w-full md:w-[65vw] lg:w-[50vw] max-w-[800px] h-full overflow-hidden"
    >
        <div
            class="overlay-drawer w-full h-full overflow-y-auto bg-stone-50/98 p-10 md:p-16 lg:p-24 shadow-[-20px_0_60px_-15px_rgba(0,0,0,0.12)]"
        >
            <button
                class="absolute top-8 right-8 text-secondary hover:text-[#8B0000] transition-colors"
                data-close-overlay
                aria-label="Close panel"
            >
                <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <slot />
        </div>
    </div>
</div>

<style is:global>
    /* Default: off-screen and unclickable */
    .overlay-panel {
        pointer-events: none;
    }

    .overlay-drawer {
        transform: translateX(100%);
        transition: transform 700ms cubic-bezier(0.16, 1, 0.3, 1);
    }

    .overlay-backdrop {
        opacity: 0;
        transition: opacity 500ms ease-out;
    }

    /* Active state: slide in and allow interaction */
    .overlay-panel.active {
        pointer-events: auto;
    }

    .overlay-panel.active .overlay-drawer {
        transform: translateX(0);
    }

    .overlay-panel.active .overlay-backdrop {
        opacity: 1;
    }
</style>
